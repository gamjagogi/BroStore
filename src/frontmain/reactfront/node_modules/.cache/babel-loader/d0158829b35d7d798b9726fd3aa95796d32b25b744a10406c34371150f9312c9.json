{"ast":null,"code":"var _jsxFileName = \"C:\\\\OneDrive - 84913\\\\OneDrive\\\\study material\\\\workspace\\\\3.MACRO_STORE\\\\hjstore\\\\src\\\\frontmain\\\\reactfront\\\\src\\\\components\\\\Board\\\\PostEditor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { useRef, useMemo } from 'react';\nimport axios from '../Request/RequestConfig.js';\nimport AWS from 'aws-sdk';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Button, Dropdown, ListGroup } from \"react-bootstrap\";\nimport { Editor } from \"../Styles/Editorform/Editor.style\";\nimport Card from \"react-bootstrap/Card\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostEditor() {\n  _s();\n  const quillRef = useRef(null);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [thumbnail, setThumbnail] = useState('');\n  const [thumbnails, setThumbnails] = useState('');\n  const [loginError, setLoginError] = useState('');\n  const [imageSrc, setImageSrc] = useState('');\n  const [index, setIndex] = useState('');\n  const [urls, setUrls] = useState([]);\n  const [updatedDomArray, setUpdatedDomArray] = useState([]);\n  const [deleted, setDeleted] = useState('');\n  const navigate = useNavigate();\n\n  // 이미지 편집기에 추가 로직 *************************************v\n  const imageHandler = () => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n    input.addEventListener('change', async () => {\n      const ACCESS_KEY = 'AKIAUM5SAFCTKG4Z2PGC';\n      const SECRET_ACCESS_KEY = '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';\n      const REGION = \"ap-northeast-2\";\n      const S3_BUCKET = 'image-gamja';\n      const uuid = uuidv4();\n      const file = input.files[0];\n      const fileName = file.name;\n\n      // AWS ACCESS KEY를 세팅합니다.\n      AWS.config.update({\n        accessKeyId: ACCESS_KEY,\n        secretAccessKey: SECRET_ACCESS_KEY\n      });\n\n      // 버킷에 맞는 이름과 리전을 설정합니다.\n      const ReactS3Client = new AWS.S3({\n        params: {\n          Bucket: S3_BUCKET\n        },\n        region: REGION\n      });\n\n      // 파일과 파일이름을 넘겨주면 됩니다.\n      const params = {\n        ACL: 'public-read',\n        Body: file,\n        Bucket: S3_BUCKET,\n        Key: file.name\n      };\n      ReactS3Client.putObject(params).on('httpUploadProgress', evt => {\n        alert(\"SUCCESS\");\n      }).send((err, data) => {\n        if (err) {\n          console.error('업로드 오류:', err);\n          alert('error');\n        } else {\n          const {\n            Bucket,\n            Key\n          } = params; // params 객체에서 Bucket과 Key를 추출합니다.\n          const imageUrl = `https://${Bucket}.s3.amazonaws.com/${Key}`; // 이미지의 위치(URL)을 구성합니다.\n          console.log('업로드 완료. 이미지 위치:', imageUrl);\n\n          // 여기서 Quill 편집기 폼에 이미지를 출력하는 로직을 실행할 수 있습니다.\n          const editor = quillRef.current.getEditor();\n          //커서 위치 받아오기 위함.\n          const range = editor.getSelection(true);\n          editor.insertEmbed(range.index, 'image', `${imageUrl}`);\n          console.log(range.index);\n          setIndex(range.index);\n          // 이미지소스 변수에 저장\n          setImageSrc(imageUrl);\n\n          // 이미지 업로드 후 커서 이미지 한칸 옆으로 이동.\n          editor.setSelection(range.index + 1);\n        }\n      });\n    });\n  };\n  // ***********************************************************^\n\n  // 모듈 및, aws s3 연결 로직 *******************************v\n  const modules = useMemo(() => ({\n    toolbar: {\n      container: [[{\n        'header': [1, 2, 3, 4, 5, 6, false]\n      }], [{\n        'font': []\n      }], [{\n        'align': []\n      }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n        'list': 'ordered'\n      }, {\n        'list': 'bullet'\n      }, 'link'], [{\n        'color': ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466', 'custom-color']\n      }, {\n        'background': []\n      }], ['image', 'video'], ['clean'], [{\n        'custom-button': '<i class=\"fas fa-bold\"></i>'\n      }]],\n      handlers: {\n        image: imageHandler\n      }\n    },\n    clipboard: {\n      matchVisual: false\n    }\n  }), []);\n  const formats = ['header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'align', 'image', 'div'];\n  const onChangeTitle = event => {\n    const newTitle = event.target.value;\n    if (newTitle.length <= 60) {\n      setTitle(newTitle);\n    } else {\n      // 팝업을 띄우는 로직을 추가하거나 원하는 작업을 수행합니다.\n      // 예시: alert을 사용하여 팝업을 띄움\n      alert('제목은 60자 이하여야 합니다.');\n    }\n  };\n  const onChangeContent = content => {\n    setContent(content);\n  };\n  const handleSubmit = async () => {\n    try {\n      const accessToken = localStorage.getItem('accessToken');\n      const refreshToken = localStorage.getItem('refreshToken');\n      console.log(accessToken);\n      console.log(refreshToken);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n          RefreshToken: `Bearer ${refreshToken}`,\n          'Content-Type': 'application/json'\n        }\n      };\n      const requestData = {\n        title,\n        content\n      };\n      if (thumbnails !== \"\") {\n        requestData.thumbnail = thumbnail;\n      }\n      if (accessToken && refreshToken) {\n        // 요청 보내기\n        console.log(requestData);\n        const response = await axios.post('/manager/shop/save', JSON.stringify(requestData), {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${accessToken}`,\n            'RefreshToken': `Bearer ${refreshToken}`\n          }\n        });\n        if (response.status == 200) {\n          // 응답 성공 시 처리할 작업\n          const data = await response.data;\n          console.log(data); // 요청에 대한 응답 처리\n          navigate('/shop');\n        } else {\n          // 응답 실패 시 처리할 작업\n          const errorMessages = await response.data;\n          console.log(errorMessages.errors);\n          const errors = errorMessages.errors;\n          for (const error of errors) {\n            console.log(error.defaultMessage);\n            alert(error.defaultMessage);\n          }\n        }\n      } else {\n        setLoginError('인증 권한을 가진 유저만 접근 가능합니다.'); // 로그인되지 않은 경우 처리\n      }\n    } catch (error) {\n      console.error('인증되지 않은 사용자가 접근하려 합니다..', error);\n      setLoginError('인증된 유저만 접근 가능합니다.');\n    }\n  };\n  // **************************************************************\n\n  // 이미지 라이브러리 로직 **********************************v\n\n  // 이미지 소스를 urls 배열에 추가.(기존 요소 유지하며 추가)\n  useEffect(() => {\n    if (typeof imageSrc === 'string') {\n      //비어있는 요소 없는지 확인\n      setUrls(prevUrls => prevUrls.filter(element => element.url !== ''));\n      const newElement = {\n        url: imageSrc,\n        index: index\n      };\n      setUrls(prevUrls => [...prevUrls, newElement]);\n    }\n  }, [imageSrc, index]);\n\n  // urls배열의 요소를 하나씩 dom형태로 만들어, updatedDomArray배열에 넣는다. (기존 요소 초기화됨)\n  useEffect(() => {\n    const domArray = urls.map((element, _) => {\n      const itemIndex = element.index;\n      const uniqueKey = `image_${itemIndex}`;\n      return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        as: \"li\",\n        draggable: \"true\",\n        \"data-log\": \"lib.diplomat\",\n        \"data-index\": itemIndex,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            width: '5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n            variant: \"top\",\n            src: element.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => handleDelete(itemIndex),\n              variant: \"primary\",\n              style: {\n                width: '3rem',\n                fontSize: '11px'\n              },\n              children: \"\\uC0AD\\uC81C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)\n      }, uniqueKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this);\n    });\n    setUpdatedDomArray(domArray);\n  }, [urls]);\n\n  // 라이브러 특정 이미지 삭제\n  const handleDelete = async itemIndex => {\n    try {\n      console.log(urls);\n      console.log(itemIndex);\n      // 편집기에서 삭제하기\n      setDeleted(itemIndex);\n    } catch (error) {\n      console.error('삭제 중 오류 발생.', error);\n      setLoginError('삭제 중 오류가 발생했습니다.');\n    }\n  };\n\n  // 라이브러리 삭제 감지 후 편집기에서도 삭제 처리\n  useEffect(() => {\n    deleteImage(deleted);\n  }, [deleted]);\n\n  // 이미지 편집기 삭제 로직 **********************************v\n  const deleteImage = rangeIndex => {\n    const editor = quillRef.current.getEditor();\n    const range = editor.getSelection(true);\n    const contents = editor.getContents();\n    console.log(rangeIndex);\n\n    // Quill 컨텐츠의 각 블록을 순회하면서 이미지를 찾고, 식별자와 일치하는 이미지를 삭제\n    contents.ops.forEach(block => {\n      if (block.insert && block.insert.image) {\n        const imageIndex = contents.ops.indexOf(block);\n        console.log('quill내부');\n        console.log(imageIndex);\n        if (imageIndex == rangeIndex) {\n          // 이미지 삭제\n          editor.deleteText(contents.ops.indexOf(block), 1);\n          setUrls(prevUrls => prevUrls.filter(element => element.index !== imageIndex));\n          console.log('삭제 성공!');\n        }\n      }\n    });\n  };\n  //*********************************************************^\n\n  // 라이브러리 열림,닫힘 초기화\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const toggleDropdown = () => {\n    setDropdownOpen(!dropdownOpen);\n  };\n  // ******************************************************************^\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: title,\n      onChange: onChangeTitle,\n      placeholder: \"\\uC81C\\uBAA9\",\n      style: {\n        flex: 'none',\n        padding: '10px',\n        fontSize: '18px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '1',\n        minHeight: '0',\n        padding: '10px',\n        fontSize: '14px',\n        marginBottom: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ReactQuill, {\n        ref: quillRef,\n        formats: formats,\n        modules: modules,\n        theme: \"snow\",\n        onChange: onChangeContent,\n        style: {\n          flex: '1',\n          minHeight: '0',\n          padding: '10px',\n          fontSize: '14px',\n          width: '100%',\n          height: '80%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: content\n        },\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      style: {\n        marginTop: 'auto',\n        padding: '10px',\n        position: 'relative',\n        top: '70px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-end',\n          marginTop: 'auto',\n          marginRight: '10px',\n          position: 'relative',\n          top: '-200px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Dropdown, {\n          show: dropdownOpen,\n          onToggle: toggleDropdown,\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n            variant: \"primary\",\n            id: \"dropdown-basic-button\",\n            children: \"\\uC0AC\\uC9C4 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n            show: true,\n            align: \"right\",\n            children: /*#__PURE__*/_jsxDEV(Editor, {\n              children: /*#__PURE__*/_jsxDEV(ListGroup, {\n                as: \"ul\",\n                className: \"se-sidebar-list\",\n                children: updatedDomArray\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-end',\n          marginTop: 'auto',\n          marginRight: '10px',\n          position: 'relative',\n          top: '-200px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          style: {\n            marginRight: '10px'\n          },\n          children: \"\\uC644\\uB8CC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {},\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 9\n  }, this);\n}\n_s(PostEditor, \"9B3TH3jUQ48HUUeqAMiTo4QPN0E=\", false, function () {\n  return [useNavigate];\n});\n_c = PostEditor;\nvar _c;\n$RefreshReg$(_c, \"PostEditor\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ReactQuill","useRef","useMemo","axios","AWS","v4","uuidv4","Button","Dropdown","ListGroup","Editor","Card","jsxDEV","_jsxDEV","PostEditor","_s","quillRef","title","setTitle","content","setContent","thumbnail","setThumbnail","thumbnails","setThumbnails","loginError","setLoginError","imageSrc","setImageSrc","index","setIndex","urls","setUrls","updatedDomArray","setUpdatedDomArray","deleted","setDeleted","navigate","imageHandler","input","document","createElement","setAttribute","click","addEventListener","ACCESS_KEY","SECRET_ACCESS_KEY","REGION","S3_BUCKET","uuid","file","files","fileName","name","config","update","accessKeyId","secretAccessKey","ReactS3Client","S3","params","Bucket","region","ACL","Body","Key","putObject","on","evt","alert","send","err","data","console","error","imageUrl","log","editor","current","getEditor","range","getSelection","insertEmbed","setSelection","modules","toolbar","container","handlers","image","clipboard","matchVisual","formats","onChangeTitle","event","newTitle","target","value","length","onChangeContent","handleSubmit","accessToken","localStorage","getItem","refreshToken","headers","Authorization","RefreshToken","requestData","response","post","JSON","stringify","status","errorMessages","errors","defaultMessage","prevUrls","filter","element","url","newElement","domArray","map","_","itemIndex","uniqueKey","Item","as","draggable","children","style","width","Img","variant","src","_jsxFileName","lineNumber","columnNumber","onClick","handleDelete","fontSize","deleteImage","rangeIndex","contents","getContents","ops","forEach","block","insert","imageIndex","indexOf","deleteText","dropdownOpen","setDropdownOpen","toggleDropdown","display","flexDirection","height","type","onChange","placeholder","flex","padding","minHeight","marginBottom","ref","theme","dangerouslySetInnerHTML","__html","className","marginTop","position","top","justifyContent","marginRight","show","onToggle","Toggle","id","Menu","align","_c","$RefreshReg$"],"sources":["C:/OneDrive - 84913/OneDrive/study material/workspace/3.MACRO_STORE/hjstore/src/frontmain/reactfront/src/components/Board/PostEditor.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport {useRef, useMemo} from 'react';\r\nimport axios from '../Request/RequestConfig.js';\r\nimport AWS from 'aws-sdk';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport {Button, Dropdown, ListGroup} from \"react-bootstrap\";\r\nimport {Editor} from \"../Styles/Editorform/Editor.style\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\n\r\nexport default function PostEditor() {\r\n    const quillRef = useRef(null);\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [thumbnail, setThumbnail] = useState('');\r\n    const [thumbnails, setThumbnails] = useState('');\r\n    const [loginError, setLoginError] = useState('');\r\n    const [imageSrc, setImageSrc] = useState('');\r\n\r\n    const [index, setIndex] = useState('')\r\n\r\n    const [urls, setUrls] = useState([]);\r\n    const [updatedDomArray, setUpdatedDomArray] = useState([]);\r\n    const [deleted, setDeleted] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n\r\n    // 이미지 편집기에 추가 로직 *************************************v\r\n    const imageHandler = () => {\r\n        const input = document.createElement('input');\r\n        input.setAttribute('type', 'file');\r\n        input.setAttribute('accept', 'image/*');\r\n        input.click();\r\n\r\n        input.addEventListener('change', async () => {\r\n\r\n            const ACCESS_KEY = 'AKIAUM5SAFCTKG4Z2PGC';\r\n            const SECRET_ACCESS_KEY = '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';\r\n            const REGION = \"ap-northeast-2\";\r\n            const S3_BUCKET = 'image-gamja';\r\n            const uuid = uuidv4();\r\n\r\n            const file = input.files[0];\r\n            const fileName = file.name;\r\n\r\n            // AWS ACCESS KEY를 세팅합니다.\r\n            AWS.config.update({\r\n                accessKeyId: ACCESS_KEY,\r\n                secretAccessKey: SECRET_ACCESS_KEY\r\n            });\r\n\r\n            // 버킷에 맞는 이름과 리전을 설정합니다.\r\n            const ReactS3Client = new AWS.S3({\r\n                params: {Bucket: S3_BUCKET},\r\n                region: REGION,\r\n            });\r\n\r\n            // 파일과 파일이름을 넘겨주면 됩니다.\r\n            const params = {\r\n                ACL: 'public-read',\r\n                Body: file,\r\n                Bucket: S3_BUCKET,\r\n                Key: file.name\r\n            };\r\n\r\n            ReactS3Client.putObject(params)\r\n                .on('httpUploadProgress', (evt) => {\r\n                    alert(\"SUCCESS\")\r\n                })\r\n                .send((err, data) => {\r\n                    if (err) {\r\n                        console.error('업로드 오류:', err);\r\n                        alert('error');\r\n                    } else {\r\n\r\n                        const {Bucket, Key} = params; // params 객체에서 Bucket과 Key를 추출합니다.\r\n                        const imageUrl = `https://${Bucket}.s3.amazonaws.com/${Key}`; // 이미지의 위치(URL)을 구성합니다.\r\n                        console.log('업로드 완료. 이미지 위치:', imageUrl);\r\n\r\n\r\n                        // 여기서 Quill 편집기 폼에 이미지를 출력하는 로직을 실행할 수 있습니다.\r\n                        const editor = quillRef.current.getEditor();\r\n                        //커서 위치 받아오기 위함.\r\n                        const range = editor.getSelection(true);\r\n                        editor.insertEmbed(\r\n                            range.index,\r\n                            'image',\r\n                            `${imageUrl}`,\r\n                        );\r\n\r\n                        console.log(range.index);\r\n\r\n                        setIndex(range.index);\r\n                        // 이미지소스 변수에 저장\r\n                        setImageSrc(imageUrl);\r\n\r\n                        // 이미지 업로드 후 커서 이미지 한칸 옆으로 이동.\r\n                        editor.setSelection(range.index + 1);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n    // ***********************************************************^\r\n\r\n\r\n\r\n\r\n    // 모듈 및, aws s3 연결 로직 *******************************v\r\n    const modules = useMemo(\r\n        () => ({\r\n            toolbar: {\r\n                container: [\r\n                    [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n                    [{'font': []}],\r\n                    [{'align': []}],\r\n                    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n                    [{'list': 'ordered'}, {'list': 'bullet'}, 'link'],\r\n                    [{'color': ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466', 'custom-color']}, {'background': []}],\r\n                    ['image', 'video'],\r\n                    ['clean'],\r\n                    [{'custom-button': '<i class=\"fas fa-bold\"></i>'}]\r\n                ],\r\n                handlers: {image: imageHandler},\r\n            },\r\n            clipboard: {\r\n                matchVisual: false,\r\n            },\r\n        }),\r\n        [],\r\n    );\r\n\r\n    const formats = [\r\n        'header',\r\n        'font',\r\n        'size',\r\n        'bold',\r\n        'italic',\r\n        'underline',\r\n        'strike',\r\n        'blockquote',\r\n        'list',\r\n        'bullet',\r\n        'align',\r\n        'image',\r\n        'div'\r\n    ];\r\n\r\n\r\n    const onChangeTitle = (event) => {\r\n        const newTitle = event.target.value;\r\n        if (newTitle.length <= 60) {\r\n            setTitle(newTitle);\r\n        } else {\r\n            // 팝업을 띄우는 로직을 추가하거나 원하는 작업을 수행합니다.\r\n            // 예시: alert을 사용하여 팝업을 띄움\r\n            alert('제목은 60자 이하여야 합니다.');\r\n        }\r\n    };\r\n\r\n    const onChangeContent = (content) => {\r\n        setContent(content);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            const accessToken = localStorage.getItem('accessToken');\r\n            const refreshToken = localStorage.getItem('refreshToken');\r\n            console.log(accessToken);\r\n            console.log(refreshToken);\r\n\r\n            const config = {\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                    RefreshToken: `Bearer ${refreshToken}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            };\r\n            const requestData = {title, content};\r\n\r\n            if (thumbnails !== \"\") {\r\n                requestData.thumbnail = thumbnail;\r\n            }\r\n\r\n            if (accessToken && refreshToken) {\r\n                // 요청 보내기\r\n                console.log(requestData);\r\n                const response = await axios.post('/manager/shop/save', JSON.stringify(requestData), {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${accessToken}`,\r\n                        'RefreshToken': `Bearer ${refreshToken}`,\r\n                    },\r\n                });\r\n\r\n                if (response.status == 200) {\r\n                    // 응답 성공 시 처리할 작업\r\n                    const data = await response.data;\r\n                    console.log(data); // 요청에 대한 응답 처리\r\n                    navigate('/shop');\r\n\r\n                } else {\r\n                    // 응답 실패 시 처리할 작업\r\n                    const errorMessages = await response.data;\r\n                    console.log(errorMessages.errors);\r\n                    const errors = errorMessages.errors;\r\n                    for (const error of errors) {\r\n                        console.log(error.defaultMessage);\r\n                        alert(error.defaultMessage);\r\n                    }\r\n                }\r\n            } else {\r\n                setLoginError('인증 권한을 가진 유저만 접근 가능합니다.'); // 로그인되지 않은 경우 처리\r\n            }\r\n        } catch (error) {\r\n            console.error('인증되지 않은 사용자가 접근하려 합니다..', error);\r\n            setLoginError('인증된 유저만 접근 가능합니다.');\r\n        }\r\n    }\r\n    // **************************************************************\r\n\r\n\r\n\r\n    // 이미지 라이브러리 로직 **********************************v\r\n\r\n    // 이미지 소스를 urls 배열에 추가.(기존 요소 유지하며 추가)\r\n    useEffect(() => {\r\n        if (typeof imageSrc === 'string') {\r\n            //비어있는 요소 없는지 확인\r\n            setUrls(prevUrls => prevUrls.filter(element => element.url !== ''));\r\n\r\n            const newElement = { url: imageSrc, index: index};\r\n            setUrls(prevUrls => [...prevUrls, newElement]);\r\n        }\r\n    }, [imageSrc,index]);\r\n\r\n    // urls배열의 요소를 하나씩 dom형태로 만들어, updatedDomArray배열에 넣는다. (기존 요소 초기화됨)\r\n    useEffect(() => {\r\n        const domArray = urls.map((element,_) => {\r\n            const itemIndex = element.index;\r\n            const uniqueKey = `image_${itemIndex}`;\r\n            return (\r\n                <ListGroup.Item\r\n                    as=\"li\"\r\n                    draggable=\"true\"\r\n                    data-log=\"lib.diplomat\"\r\n                    data-index={itemIndex}\r\n                    key={uniqueKey}\r\n                >\r\n                    <Card style={{ width: '5rem' }}>\r\n                        <Card.Img variant=\"top\" src={element.url} />\r\n                        <Card.Body>\r\n                            <Button onClick={() => handleDelete(itemIndex)} variant=\"primary\" style={{ width: '3rem', fontSize: '11px' }}>\r\n                                삭제\r\n                            </Button>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </ListGroup.Item>\r\n            );\r\n        });\r\n        setUpdatedDomArray(domArray);\r\n    }, [urls]);\r\n\r\n\r\n\r\n    // 라이브러 특정 이미지 삭제\r\n    const handleDelete = async (itemIndex) => {\r\n        try {\r\n            console.log(urls);\r\n            console.log(itemIndex);\r\n            // 편집기에서 삭제하기\r\n            setDeleted(itemIndex);\r\n\r\n\r\n        } catch (error) {\r\n            console.error('삭제 중 오류 발생.', error);\r\n            setLoginError('삭제 중 오류가 발생했습니다.');\r\n        }\r\n    };\r\n\r\n    // 라이브러리 삭제 감지 후 편집기에서도 삭제 처리\r\n    useEffect(() => {\r\n        deleteImage(deleted);\r\n    }, [deleted]);\r\n\r\n    // 이미지 편집기 삭제 로직 **********************************v\r\n    const deleteImage = (rangeIndex) => {\r\n        const editor = quillRef.current.getEditor();\r\n        const range = editor.getSelection(true);\r\n        const contents = editor.getContents();\r\n        console.log(rangeIndex);\r\n\r\n        // Quill 컨텐츠의 각 블록을 순회하면서 이미지를 찾고, 식별자와 일치하는 이미지를 삭제\r\n        contents.ops.forEach((block) => {\r\n            if (block.insert && block.insert.image) {\r\n                const imageIndex = contents.ops.indexOf(block);\r\n                console.log('quill내부');\r\n                console.log(imageIndex);\r\n\r\n                if (imageIndex == rangeIndex) {\r\n                    // 이미지 삭제\r\n                    editor.deleteText(contents.ops.indexOf(block), 1);\r\n                    setUrls(prevUrls => prevUrls.filter(element => element.index !== imageIndex));\r\n                    console.log('삭제 성공!')\r\n                }\r\n            }\r\n        });\r\n        \r\n    };\r\n    //*********************************************************^\r\n\r\n\r\n    // 라이브러리 열림,닫힘 초기화\r\n    const [dropdownOpen, setDropdownOpen] = useState(false);\r\n\r\n    const toggleDropdown = () => {\r\n        setDropdownOpen(!dropdownOpen);\r\n    };\r\n    // ******************************************************************^\r\n\r\n    return (\r\n        <div style={{display: 'flex', flexDirection: 'column', height: '100vh'}}>\r\n            <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={onChangeTitle}\r\n                placeholder=\"제목\"\r\n                style={{flex: 'none', padding: '10px', fontSize: '18px'}}\r\n            />\r\n\r\n\r\n            <div style={{flex: '1', minHeight: '0', padding: '10px', fontSize: '14px', marginBottom: 'auto'}}>\r\n                {/* <ReactQuill/> 컴포넌트를 감싸는 div */}\r\n                <ReactQuill\r\n                    ref={quillRef}\r\n                    formats={formats}\r\n                    modules={modules}\r\n                    theme=\"snow\"\r\n                    onChange={onChangeContent}\r\n                    style={{flex: '1', minHeight: '0', padding: '10px', fontSize: '14px', width: '100%', height: '80%'}}\r\n                />\r\n                <div dangerouslySetInnerHTML={{__html: content}} style={{display: 'none'}}/>\r\n            </div>\r\n            <br/>\r\n            <div className=\"footer\" style={{ marginTop: 'auto', padding: '10px', position: 'relative', top: '70px' }}>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    marginTop: 'auto',\r\n                    marginRight: '10px',\r\n                    position: 'relative',\r\n                    top: '-200px'\r\n                }}>\r\n                    {/*<ImageLibrary imageSrc={imageSrc} index={index} />*/}\r\n                    <Dropdown show={dropdownOpen} onToggle={toggleDropdown}>\r\n                        <Dropdown.Toggle variant=\"primary\" id=\"dropdown-basic-button\">\r\n                            사진 라이브러리\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu show={true} align=\"right\">\r\n                            <Editor>\r\n                                <ListGroup as=\"ul\" className=\"se-sidebar-list\">\r\n                                    {updatedDomArray}\r\n                                </ListGroup>\r\n                            </Editor>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                </div>\r\n\r\n                <br/>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    marginTop: 'auto',\r\n                    marginRight: '10px',\r\n                    position: 'relative',\r\n                    top: '-200px'\r\n                }}>\r\n                    <button onClick={handleSubmit} style={{marginRight: '10px'}}>완료</button>\r\n                    <button style={{}}>취소</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}