{"ast":null,"code":"import _regeneratorRuntime from\"C:/OneDrive - 84913/OneDrive/study material/workspace/3.MACRO_STORE/hjstore/src/frontmain/reactfront/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/OneDrive - 84913/OneDrive/study material/workspace/3.MACRO_STORE/hjstore/src/frontmain/reactfront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/OneDrive - 84913/OneDrive/study material/workspace/3.MACRO_STORE/hjstore/src/frontmain/reactfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container}from\"../components/Styles/Container/Container.style\";import{useLocation,useNavigate}from\"react-router-dom\";import Pagination from'react-bootstrap/Pagination';import ListGroup from'react-bootstrap/ListGroup';import Image from'react-bootstrap/Image';import axios from'../components/Request/RequestConfig.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),loginError=_useState2[0],setLoginError=_useState2[1];var _useState3=useState({content:[]}),_useState4=_slicedToArray(_useState3,2),boardPG=_useState4[0],setBoardPG=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var navigate=useNavigate();useEffect(function(){handlePage();},[currentPage]);var handlePage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,refreshToken,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;accessToken=localStorage.getItem('accessToken');refreshToken=localStorage.getItem('refreshToken');if(!(accessToken&&refreshToken)){_context.next=17;break;}_context.next=6;return axios.get(\"/auth/shop?page=\".concat(currentPage-1),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(accessToken),'RefreshToken':\"Bearer \".concat(refreshToken)}});case 6:response=_context.sent;if(!(response.status==200)){_context.next=14;break;}_context.next=10;return response.data;case 10:data=_context.sent;setBoardPG(data.data);_context.next=15;break;case 14:setLoginError('인증된 유저만 접근 가능합니다.');case 15:_context.next=18;break;case 17:setLoginError('로그인이 필요합니다.');case 18:_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](0);console.error('인증되지 않은 사용자가 접근하려 합니다..',_context.t0);setLoginError('인증된 유저만 접근 가능합니다.');case 24:case\"end\":return _context.stop();}},_callee,null,[[0,20]]);}));return function handlePage(){return _ref.apply(this,arguments);};}();var handlePosting=function handlePosting(){navigate('/editor');};var handleNextPage=function handleNextPage(){setCurrentPage(function(currentPage){return currentPage+1;});};var handleBackPage=function handleBackPage(){setCurrentPage(function(currentPage){return currentPage-1;});};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\" ShopPage \"})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsxs(\"form\",{action:\"/\",method:\"get\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",name:\"keyword\"}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:'0.5em'},children:\"Search\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'0.5em'},children:/*#__PURE__*/_jsx(\"form\",{action:\"/\",method:\"get\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handlePosting,style:{marginLeft:'0.5em'},children:\"\\uAE00\\uC791\\uC131\"})})}),/*#__PURE__*/_jsx(ListGroup,{as:\"ol\",numbered:true,children:boardPG.content.map(function(board){return/*#__PURE__*/_jsxs(ListGroup.Item,{as:\"li\",className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ms-2 me-auto\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"fw-bold\",children:board.title}),/*#__PURE__*/_jsx(\"a\",{href:\"/detail/\".concat(board.id),children:\"\\uC0C1\\uC138\\uBCF4\\uAE30\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uC791\\uC131\\uC790 : \",board.user.username]})}),/*#__PURE__*/_jsx(\"hr\",{}),console.log(board.thumbnail),/*#__PURE__*/_jsx(Image,{src:board.thumbnail,style:{height:\"100px\"},fluid:true})]},board.id);})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD604\\uC7AC \\uD398\\uC774\\uC9C0: \",currentPage]}),/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.First,{onClick:function onClick(){return setCurrentPage(1);}}),/*#__PURE__*/_jsx(Pagination.Prev,{onClick:handleBackPage,disabled:currentPage===1}),Array.from({length:boardPG.totalPages},function(_,index){return/*#__PURE__*/_jsx(Pagination.Item,{active:index+1===currentPage,onClick:function onClick(){return setCurrentPage(index+1);},children:index+1},index+1);}),/*#__PURE__*/_jsx(Pagination.Next,{onClick:handleNextPage,disabled:boardPG.last}),/*#__PURE__*/_jsx(Pagination.Last,{onClick:function onClick(){return setCurrentPage(boardPG.totalPages);}})]})]});};export default Shop;","map":{"version":3,"names":["React","useState","useEffect","Container","useLocation","useNavigate","Pagination","ListGroup","Image","axios","jsx","_jsx","jsxs","_jsxs","Shop","_useState","_useState2","_slicedToArray","loginError","setLoginError","_useState3","content","_useState4","boardPG","setBoardPG","_useState5","_useState6","currentPage","setCurrentPage","navigate","handlePage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","accessToken","refreshToken","response","data","wrap","_callee$","_context","prev","next","localStorage","getItem","get","concat","headers","sent","status","t0","console","error","stop","apply","arguments","handlePosting","handleNextPage","handleBackPage","children","style","display","justifyContent","action","method","type","placeholder","name","marginLeft","marginTop","onClick","as","numbered","map","board","Item","className","title","href","id","user","username","log","thumbnail","src","height","fluid","First","Prev","disabled","Array","from","length","totalPages","_","index","active","Next","last","Last"],"sources":["C:/OneDrive - 84913/OneDrive/study material/workspace/3.MACRO_STORE/hjstore/src/frontmain/reactfront/src/screens/Shop.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container } from \"../components/Styles/Container/Container.style\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport Pagination from 'react-bootstrap/Pagination';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Image from 'react-bootstrap/Image';\r\nimport axios from '../components/Request/RequestConfig.js';\r\n\r\n\r\n\r\nconst Shop = () => {\r\n    const [loginError, setLoginError] = useState('');\r\n    const [boardPG, setBoardPG] = useState({ content: [] });\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        handlePage();\r\n    }, [currentPage]);\r\n\r\n    const handlePage = async () => {\r\n        try {\r\n            const accessToken = localStorage.getItem('accessToken');\r\n            const refreshToken = localStorage.getItem('refreshToken');\r\n\r\n            if (accessToken && refreshToken) {\r\n                const response = await axios.get(`/auth/shop?page=${currentPage - 1}`, {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${accessToken}`,\r\n                        'RefreshToken': `Bearer ${refreshToken}`,\r\n                    },\r\n                });\r\n\r\n                if (response.status == 200) {\r\n                    const data = await response.data;\r\n                    setBoardPG(data.data);\r\n                } else {\r\n                    setLoginError('인증된 유저만 접근 가능합니다.');\r\n                }\r\n            } else {\r\n                setLoginError('로그인이 필요합니다.');\r\n            }\r\n        } catch (error) {\r\n            console.error('인증되지 않은 사용자가 접근하려 합니다..', error);\r\n            setLoginError('인증된 유저만 접근 가능합니다.');\r\n        }\r\n    };\r\n\r\n    const handlePosting = () => {\r\n        navigate('/editor');\r\n    }\r\n\r\n    const handleNextPage = () => {\r\n        setCurrentPage((currentPage) => currentPage + 1);\r\n    }\r\n\r\n    const handleBackPage = () => {\r\n        setCurrentPage((currentPage) => currentPage - 1);\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <header>\r\n                <h1> ShopPage </h1>\r\n            </header>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                <form action=\"/\" method=\"get\">\r\n                    <input type=\"text\" placeholder=\"Search\" name=\"keyword\" />\r\n                    <button style={{ marginLeft: '0.5em' }}>Search</button>\r\n                </form>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '0.5em' }}>\r\n                <form action=\"/\" method=\"get\">\r\n                    <button onClick={handlePosting} style={{ marginLeft: '0.5em' }}>글작성</button>\r\n                </form>\r\n            </div>\r\n\r\n            <ListGroup as=\"ol\" numbered={true}>\r\n\r\n                {boardPG.content.map((board) => (\r\n                    <ListGroup.Item as=\"li\" className=\"d-flex justify-content-between align-items-start\" key={board.id}>\r\n                        <div className=\"ms-2 me-auto\">\r\n                            <h4 className=\"fw-bold\">{board.title}</h4>\r\n                            <a href={`/detail/${board.id}`}>상세보기</a>\r\n                        </div>\r\n                        <div>\r\n                            <div>작성자 : {board.user.username}</div>\r\n                        </div>\r\n                        <hr />\r\n                        {console.log(board.thumbnail)}\r\n                        <Image src={board.thumbnail} style={{ height: \"100px\" }} fluid />\r\n                    </ListGroup.Item>\r\n                ))}\r\n            </ListGroup>\r\n\r\n            <div>현재 페이지: {currentPage}</div>\r\n\r\n            <Pagination>\r\n                <Pagination.First onClick={() => setCurrentPage(1)} />\r\n                <Pagination.Prev onClick={handleBackPage} disabled={currentPage === 1} />\r\n                {Array.from({ length: boardPG.totalPages }, (_, index) => (\r\n                    <Pagination.Item\r\n                        key={index + 1}\r\n                        active={index + 1 === currentPage}\r\n                        onClick={() => setCurrentPage(index + 1)}\r\n                    >\r\n                        {index + 1}\r\n                    </Pagination.Item>\r\n                ))}\r\n                <Pagination.Next onClick={handleNextPage} disabled={boardPG.last} />\r\n                <Pagination.Last onClick={() => setCurrentPage(boardPG.totalPages)} />\r\n            </Pagination>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default Shop;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}